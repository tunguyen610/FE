<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,700,900|Roboto+Mono:300,400,500" /> -->
        <link rel='stylesheet' id='tt-easy-google-fonts-css' href='https://fonts.googleapis.com/css?family=Roboto%3A300%2C100&#038;subset=latin%2Call&#038;ver=5.1.2' type='text/css' media='all' />
        <!-- <link rel="stylesheet" href="../files/fonts/icomoon/style.css" /> -->

        <!-- Latest compiled and minified CSS & JS -->
        <link rel="stylesheet" media="screen" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />

        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" />

        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
        <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
        <style>
            .vc_custom_1519367556899 {
                margin-right: 0px !important;
                margin-bottom: 30px !important;
                margin-left: 0px !important;
                border-left-width: 0px !important;
                border: none !important;
            }
            
            .site-section.site-section-sm {
                margin-top: 30px !important;
            }
            
            .novaticContainer {
                font-size: 1.6rem !important;
                line-height: 1.7;
                /* color: rgba(0, 0, 0, 0.6); */
                font-weight: 400;
            }
            
            .btn,
            .form-control,
            .property-entry .property-title {
                font-size: 1.8rem !important;
            }
            
            .form-control,
            .btn {
                border-radius: 0px !important;
            }
            
            .property-title {
                margin: 5px 0px !important;
            }
            
            .property-entry .property-location {
                font-size: 1.5rem !important;
            }
            
            .property-specs {
                font-size: 1.2rem !important;
            }
            
            .property-specs-wrap {
                margin-top: 4px;
            }
            
            .property-specs-number {
                font-size: 1.4rem !important;
                color: #2196f3 !important;
            }
            
            #keyword {
                margin-right: 10px;
                height: 36px;
            }
            
            .property-price {
                font-size: 1.5rem !important;
            }
            
            .publishedTime {
                font-size: 1.3rem !important;
            }
            
            .form-search label {
                text-transform: uppercase;
                font-size: 1.4rem !important;
                letter-spacing: 0.1em;
                color: rgba(255, 255, 255, 0.77) !important;
            }
            
            .novaticContainer input,
            .novaticContainer select,
            #sortCondition {
                height: 47px !important;
            }
            
            #tableData_wrapper>div:nth-child(1),
            #tableData_wrapper>div:nth-child(2) {
                display: none;
            }
            
            .property-body {
                padding: 0px 0px !important;
            }
            
            .form-search {
                background: #364e68;
                position: relative;
                z-index: 1;
                padding: 2rem 0rem;
            }
            
            .select-wrap {
                position: relative;
            }
            
            .property-entry .property-body {
                position: relative;
            }
            
            .property-entry .property-specs-wrap {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            
            .property-entry .property-specs-wrap li {
                display: inline-block;
                margin-right: 10px;
                /* margin-bottom: 10px; */
            }
            
            .property-entry .property-specs {
                display: block;
                text-transform: uppercase;
                font-size: 10px;
                letter-spacing: 0.1em;
            }
            
            .text-success {
                color: #7cbd1e !important;
            }
            
            #tableData {
                border: 1px solid #2196f324;
                width: 100%;
            }
            
            #tableData>thead {
                display: none;
            }
            
            .bg-gradient-info {
                border-radius: calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0;
                background: linear-gradient(87deg, #11cdef 0, #1171ef 100%) !important;
                margin-right: -0.5px;
            }


            .bg-gradient-success {
            background: linear-gradient(87deg, #2dce89 0, #2dcecc 100%) !important;
            border-radius: calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0;
            }
            
            .detailItemContainer {}
            
            #detailName {
                font-size: 2.5rem;
                color: #1171ef;
            }
            
            #detailProvince {
                font-size: 2rem;
                color: #0620b3;
            }
            
            #detailPrice {
                font-size: 2.3em !important;
                font-weight: bold !important;
            }
            
            #detailDetailInfo {
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid #86a7b533;
            }
            
            #detailPublishedYear,
            #detailCompanyCategory {
                background: #8bc34a38;
                padding: 5px 10px;
                border-radius: 4px;
                margin-top: px !important;
                text-align: center;
                font-weight: bold;
            }
            
            .modal-body {
                height: auto;
            }
            
            .detailFooter {
                text-align: left;
                margin-top: 30px;
                padding: 10px 30px;
            }
            
            .footerSeparator {
                border-top: 1px solid #86a7b533 !important;
                padding-top: 10px;
                padding-bottom: 10px;
                margin-left: -30px !important;
                margin-right: -30px !important;
                font-size: 2rem !important;
            }
            
            .footerSeparator>a {
                padding-left: 30px !important;
            }
            
            .detailFooter p {
                font-size: 2rem;
                color: #18b13c;
                font-weight: bold;
            }
            
            .btnPhone,
            .btnMail,
            .btnClose {
                border-radius: 3px !important;
            }
            
            .btnPhone>a,
            .btnMail>a {
                color: #fff;
                font-size: 1.7rem;
            }
            
            .btnClose {
                float: right;
                padding: 10px 30px;
                font-size: 1.2rem !important;
            }
            
            .detailFooter a:hover {
                text-decoration: none;
            }
            
            .required {
                color: red;
                font-size: 1.8rem;
                font-weight: bold !important;
            }
            /* BOOTSTRAP OVERRIDE */
            
            .h1,
            .h2,
            .h3,
            .h4,
            .h5,
            .h6,
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: 'roboto' !important;
            }
            
            .modal-footer {
                border-top: none;
            }
        </style>
        <!-- Favicon icon -->
        <link rel="icon" href="files/assets/images/favicon.ico" type="image/x-icon">
        <script src="https://cdn.ckeditor.com/ckeditor5/12.3.1/classic/ckeditor.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>

    </head>

    <div class="col novaticContainer">
        <div class="container-fluid">
            <div class="row">
                <form class="form-search col-md-12">
                    <div class="col-md-9  align-items-end">
                        <div class="col-md-4">
                            <label for="list-types">Ng√†nh ngh·ªÅ</label>
                            <div class="select-wrap">
                                <select name="list-types" id="jobCategoryID" class="form-control d-block rounded-0">
                                <option value="0">T·∫•t c·∫£</option>
                            </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="offer-types">T·ªânh/ TP</label>
                            <div class="select-wrap">
                                <select name="offer-types" id="provinceID" class="form-control d-block rounded-0">
                                <option value="0">T·∫•t c·∫£</option>
                            </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="select-city">NƒÉm th√†nh l·∫≠p</label>
                            <div class="select-wrap">
                                <select name="select-city" id="publishedYear" class="form-control d-block rounded-0">
                                <option value="0">T·∫•t c·∫£</option>
                                <option value="2019">2019</option>
                                <option value="2018">2018</option>
                                <option value="2017">2017</option>
                                <option value="2016">2016</option>
                                <option value="2015">2015</option>
                                <option value="2014">2014</option>
                                <option value="2013">2013</option>
                                <option value="2012">2012</option>
                                <option value="2011">2011</option>
                                <option value="2010">2010</option>
                                <option value="2009">2009</option>
                                <option value="2008">2008</option>
                                <option value="2007">2007</option>
                                <option value="2006">2006</option>
                                <option value="2005">2005</option>
                                <option value="2004">2004</option>
                                <option value="2003">2003</option>
                                <option value="2002">2002</option>
                                <option value="2001">2001</option>
                                <option value="2000">2000</option>
                                <option value="1999">1999</option>
                                <option value="1998">1998</option>
                                <option value="1997">1997</option>
                                <option value="1996">1996</option>
                                <option value="1995">1995</option>
                                <option value="1994">1994</option>
                                <option value="1993">1993</option>
                                <option value="1992">1992</option>
                                <option value="1991">1991</option>
                                <option value="1990">1990</option>
                            </select>
                            </div>
                        </div>

                        <div class="col-md-8">
                            <label for="offer-types">T·ª´ kh√≥a</label>
                            <div class="select-wrap">
                                <input type="text" name="" id="keyword" class="form-control" value="" required="required" pattern="" title="" />
                            </div>
                        </div>

                        <div class="col-md-4">
                            <label for="offer-types" style="visibility: hidden">S·∫Øp x·∫øp</label>
                            <!-- c√≥ 2 ph∆∞∆°ng √°n 1 l√† th√™m publishedTime l√† ng√†y c√¥ng b·ªë, ng√†y ph√°t h√†nh v√†o db, 2 l√† s·ª≠a t·∫°m th·ªùi n√≥ th√†nh createdTime, cho nhanh t√¥i l√†m c1 -->
                            <div class="select-wrap">
                                <select id="sortCondition" class="form-control form-control-sm d-block rounded-0">
                                <option value=" order by createdTime desc ">Tin m·ªõi nh·∫•t</option>
                                <option value=" order by createdTime asc ">Tin c≈© nh·∫•t</option>
                                <option value=" order by salary asc ">Gi√° th·∫•p ƒë·∫øn cao</option>
                                <option value=" order by salary desc ">Gi√° cao ƒë·∫øn th·∫•p</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="col-md-12">
                            <label for="offer-types" style="visibility: hidden">Button</label>
                            <div class="select-wrap">
                                <input style="height: 47px;" type="button" id="searchButton" class="btn btn-success text-white btn-block rounded-0" value="T√¨m ki·∫øm" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <label for="offer-types" style="visibility: hidden">Button</label>
                            <div class="select-wrap" onclick="editItem(0);">
                                <input style="height: 47px;" type="button" id="buyButton" class="btn btn-primary text-white btn-block rounded-0" value="ƒêƒÉng tin b√°n" />
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>

    <div class="col">
        <div class="col" id="tableDataContainer">
            <table id="tableData" class="display ">
                <thead>
                    <tr>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- ITEM STARTS -->
        <!-- <div class="row mb-4 novaticItem" style="display: none">
        <div class="col-md-12">
          <div class="property-entry horizontal d-lg-flex">
            <div class="p-4 property-body">
              <h2 class="property-title">
                <a href="#">B√°n c√¥ng ty truy·ªÅn th√¥ng ƒëa ph∆∞∆°ng ti·ªán</a>
              </h2>
              <span class="property-location d-block mb-3"
                ><span class="property-icon icon-room"></span> H√† N·ªôi
              </span>
              <strong
                class="property-price text-primary mb-3 d-block text-success"
                >28,000,000 vnƒë</strong
              >
              <p>
                B√°n c√¥ng ty c√≥ 5 nƒÉm ho·∫°t ƒë·ªông c√≥ k·∫øt qu·∫£ kinh doanh t·ªët. Doanh
                thu 2017: 679 tri·ªáu; nƒÉm 2018; 2 t·ª∑ C√¥ng ty hi·ªán c√≤n 125 s·ªë h√≥a
                ƒë∆°n ch∆∞a s·ª≠ d·ª•ng. Cam k·∫øt c√¥ng ty s·∫°ch thu·∫ø, ko n·ª£ ƒë·ªçng nghƒ©a v·ª•
                t√†i ch√≠nh, b√°o c√°o thu·∫ø ƒë·∫ßy ƒë·ªß Gi√° b√°n: 28 tri·ªáu bao g·ªìm m·ªçi th·ªß
                t·ª•c sang t√™n.
              </p>
            </div>
          </div>
        </div>
      </div> -->
        <!-- ITEM ENDS -->
    </div>
    </div>

    <!-- ITEM DETAIL MODAL -->
    <div class="modal fade detailItemContainer" id="modal-id">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-gradient-info">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <!-- ƒë·ªïi th√†nh chi ti·∫øt job, c√°c thu·ªôc t√≠nh c·ªßa job s·∫Ω ƒë∆∞a v√†o thay th·∫ø cho m·∫•y thu·ªôc t√≠nh c·ªßa doanh nghi·ªáp, hi·ªÉu k ?ok
                t·∫•t c·∫£ c√°c th·∫ª ƒë·ªÉ ƒë·ªï n·ªôi dung ƒë·ªÅu c√≥ id l√† detail+t√™n thu·ªôc t√≠nh
                vd
                detailName
                detailPublishedTime
                detailPrice
                detailDescription

                ƒë·ªïi th√†nh thu·ªôc t√≠nh c·ªßa zitga 
                s·∫Ω c√≥ 1 v·∫•n ƒë·ªÅ, l√† c√°i masterlaw n√≥ ko c√≥ kh√≥a ngo√†i, category c·ªßa n√≥ l√† text lu√¥n
                c√≤n zitga v√≠ d·ª• jobCategory s·∫Ω l√† 10001 10002, hi·ªÉu k ?ok 
                ko sao c·∫£, c·ª© l·∫•y 10001 10002 ra cho t, ok ?ok
                -->
                    <h4 class="modal-title"><i class="fa fa-edit"></i> Chi ti·∫øt doanh nghi·ªáp</h4>
                </div>
                <div class="modal-body" style="">
                    <form>

                        <!-- ITEM STARTS -->
                        <div class="col-md-12 novaticItem">
                            <div class="property-entry horizontal d-lg-flex">
                                <div class="p-4 property-body">
                                    <h2 class="property-title">
                                        <span id="detailName"></span>
                                    </h2>
                                    <span class="property-location d-block mb-3"><span class="property-icon icon">üìç</span>
                                    <span id="detailProvince"></span> <span class="property-icon icon">
                                        &nbsp; &nbsp; &nbsp; üïí</span>
                                    <span class="publishedTime" id="detailPublishedTime"></span></span>
                                    <div class="col">
                                        <strong class="property-price text-primary text-success column-price" id="detailPrice">
                                    </strong>
                                        <strong class="property-price text-primary text-success"> vnƒë</strong>
                                    </div>
                                    <p id="detailDescription">

                                    </p>
                                    <ul class="property-specs-wrap mb-3 mb-lg-0">
                                        <li>
                                            <span class="property-specs">NƒÉm th√†nh l·∫≠p</span>
                                            <div class="property-specs-number" id="detailPublishedYear"></div>

                                        </li>
                                        <li>
                                            <span class="property-specs">Danh m·ª•c doanh nghi·ªáp</span>
                                            <div class="property-specs-number" id="detailCompanyCategory"></div>
                                        </li>
                                    </ul>



                                    <div id="detailDetailInfo">

                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- ITEM ENDS -->

                    </form>
                </div>
                <div class="modal-footer">

                    <!-- <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button> -->
                    <div class="detailFooter row">

                        <div class="row separator"></div>


                        <h2 class="property-title footerSeparator" style="font-weight: bold;font-size:1.8rem;">
                            <a href="contact">Li√™n h·ªá v·ªõi ch√∫ng t√¥i</a>
                        </h2>
                        <button class="btnPhone btn btn-success">
                            üìû <a href="tel:(+84) 166 360 1654">+84 166 360 1654</a>
                        </button>
                        <button class="btnMail btn btn-primary"> 
                            üìß <a href="mailto:ntdat0109@gmail.com">ntdat0109@gmail.com</a>
                        </button>

                        <button class="btnClose btn btn-default" data-dismiss="modal"> 
                         OK
                        </button>
                    </div>


                </div>
            </div>
        </div>
    </div>
    <!-- ITEM DETAIL MODAL END -->

    <!-- ti·∫øp  theo l√† c√°i n√†y, form insert, th√¥i c√°i n√†y ko c·∫ßn -->

    <!-- SALE REQUEST MODAL -->
    <div class="modal fade" id="saleRequest">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-gradient-success">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"><i class="fa fa-edit"></i>ƒêƒÉng tin b√°n doanh nghi·ªáp</h4>
                </div>
                <div class="modal-body">

                    <form action="" method="POST" onsubmit='updateItem(updatingItemID); return false;' role="form">

                        <div class="form-group" style="display:none">
                            <label for="">ID</label><span class='required'>*</span>
                            <input type="number" class="form-control input-id" value="0" id="buyId" required readonly placeholder="">
                        </div>
                        <div class="form-group" style="display:none ">
                            <label for="">Active</label><span class='required'>*</span>
                            <input type="number" class="form-control input-active" value="0" id="buyActive" required placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="">T√™n ng∆∞·ªùi li√™n h·ªá:</label><span class='required'>*</span>
                            <input type="text" class="form-control  input-name" id="buyName" required placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="">S·ªë ƒëi·ªán tho·∫°i:</label><span class='required'>*</span>
                            <input type="tel" class="form-control  input-name" id="buyPhone" required placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="">ƒê·ªãa ch·ªâ email:</label><span class='required'>*</span>
                            <input type="email" class="form-control  input-name" id="buyEmail" required placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="">M√£ s·ªë doanh nghi·ªáp:</label><span class='required'>*</span>
                            <input type="number" class="form-control  input-name" id="buyCompanyCode" required placeholder="">
                        </div>
                        <div class="form-group">
                            <label for="">M√¥ t·∫£ y√™u c·∫ßu v·ªÅ doanh nghi·ªáp</label>
                            <textarea class="form-control  input-description " rows="2" id="buyDescription"></textarea>
                        </div>


                        <div class='form-group row selectContainer'>
                            <div class="col-md-6">
                                <label for="offer-types">Ng√†nh ngh·ªÅ</label>
                                <div class="select-wrap">
                                    <select name="offer-types" id="buyCompanyCategoryID" class="form-control d-block rounded-0">
                                        <option value="Kh√°c">Kh√°c</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <label for="offer-types">T·ªânh/ TP</label>
                                <div class="select-wrap">
                                    <select name="offer-types" id="buyProvinceID" class="form-control d-block rounded-0">
                                        <option value="0">T·∫•t c·∫£</option>
                                    </select>
                                </div>
                            </div>
                        </div>


                        <div class="form-group">
                            <label for="">Gi√° (VNƒê)</label><span class='required'>*</span>
                            <input type="text" class="form-control  input-price" id="buyPrice" required placeholder="">
                        </div>


                        <div class="form-group" style="display: none">
                            <label for="">M√£ s·ªë doanh nghi·ªáp</label><span class='required'>*</span>
                            <input type="number" class="form-control input-publishedYear" value="0" id="buyPublishedYear" placeholder="">
                        </div>

                        <input style="display:none" id="hiddenSubmit" type="submit" class="btn btn-default" value="Save changes">
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">H·ªßy y√™u c·∫ßu</button>
                    <button type="button" class="btn btn-primary" id="btnUpdateItem" onclick="document.getElementById('hiddenSubmit').click();">G·ª≠i y√™u c·∫ßu
                </button>
                </div>
            </div>
        </div>
    </div>
    <!-- SALE REQUEST MODAL ENDS -->

</html>
<script type="text/javascript">
    var table;
    var dataSource = [];
    var jobCategoryData = [];

    // th√¨ t∆∞∆°ng t·ª± c√°ch l√†m v·ªõi job, ta c≈©ng t·∫°o m·∫£ng

    $(document).ready(function() {
        // var table = $("#tableData ").DataTable();

        //c√°i n√†y l√† load v√†o th·∫ª select c·ªßa danh m·ª•c c√¥ng ty, danh m·ª•c t·ªânh th√†nh ... v·ªõi zitga ƒë·ªïi th√†nh c√°c th·∫ª select c·ªßa n√≥, ok ?ok
        loadDataSelectCompanyCategory();
        loadDataSelectProvince();
        loadData();

        $("#searchButton").click(function() {
            loadData();
        });
    });

// ƒë√¢y ƒë·∫ßu ti√™n c√°i load n√†y:
    function loadData() {
        // $("#novaticItemContainer div").remove();

        var searchCondition = "  ";
        // data: {condition:' messageCheckingStatusID=10001 '},
        var jobCategoryID = $("#jobCategoryID").val() == "0" ? 0 : $("#jobCategoryID").val();
        var provinceID = $("#provinceID").val() == "0" ? 0 : $("#provinceID").val();
        var publishedYear =
            $("#publishedYear").val() == "0" ? 0 : $("#publishedYear").val();

        if (jobCategoryID != "0") {
            searchCondition += " jobCategoryID like '%" + jobCategoryID + "%' ";
        } else {
            searchCondition += " 1=1 ";
        }

        if (provinceID != "0") {
            searchCondition += " and provinceID like '%" + provinceID + "%' ";
        }
        if (publishedYear != "0") {
            searchCondition += " and publishedYear like '%" + publishedYear + "%' ";
        }

        //keyword
        var keyword = $("#keyword").val();
        if (keyword.length > 0) {
            searchCondition +=
                " and ( name like '%" +
                keyword +
                "%' or description like '%" +
                keyword +
                "%' )";
        }

        //sort
        searchCondition += $("#sortCondition").val();

        console.log(searchCondition);

        //ƒë·ªïiiurl th√†nh c·ªßa m√¨nh
        $.ajax({
            url: "http://localhost/zitgaNovatic/api/job/readQuery.php",
            type: "POST",
            data: {
                condition: searchCondition
            },
            success: function(responseData) {
                // debugger;
                if (responseData.data.length == 0) {
                    alert("R·∫•t ti·∫øc, hi·ªán ch∆∞a c√≥ th√¥ng tin !");
                    return;
                }

                if ($("#tableData tbody tr").length > 0) {
                    //   debugger;
                    var dataCount = table.rows().data().length;
                    if (dataCount > 0) {
                        for (let index = 0; index < dataCount; index++) {
                            table
                                .row()
                                .remove()
                                .draw();
                        }
                    }
                    table.destroy();
                    var newTable =
                        "<table id='tableData' class='display ' style='width:100%'></table>";
                    $(newTable).appendTo($("#tableDataContainer"));
                }

                dataSource = responseData.data;
                dataSource.forEach(function(item, index) {
                    // debugger;
                    // console.log(item, index);
                    //ch·ªó n√†y v√¨ 1 object c·ªßa master law kh√°c c·ªßa zitga, masterlaw c√≥ obj.price, obj.provinceID, zitga c√≥ obj.hrStaffID obj.jobRankID, obj.salary ok ? ok
                    // ta s·ª≠a l·∫°i
                    //debug ƒë√£, xem 1 object c√≥ nh·ªØng g√¨:
                    active: "1"
// benefit: ""
// branchID: "10002"
// closeTime: "2019-11-14 22:26:02"
// companyID: "10001"
// createdTime: "2019-09-26 22:29:08"
// description: ""
// hrStaffID: "10001"
// id: "10002"
// jobCategoryID: "10001"
// jobDetail: ""
// jobRankID: "10001"
// jobStatusID: "10001"
// jobTitleID: "10001"
// jobTypeID: "10003"
// name: "Tuy·ªÉn 1000 l·∫≠p tr√¨nh vi√™n"
// openTime: "2019-09-06 22:25:53"
// photo: ""
// quantity: "10"
// requirementAcademicDegree: ""
// requirementDetail: ""
// requirementDocument: ""
// requirementExperience: ""
// requirementLanguage: ""
// requirementSex: ""
// salary: ""
// workingHour: ""
                    debugger;
                    var newRow =
                        `<tr onclick='detailItem(` +
                        item.id +
                        `)' class='novaticDataItem'><td>
                        <div class='col-md-12 novaticItem'>
                            <div class='property-entry horizontal d-lg-flex'>
                                <div class='p-4 property-body'>
                                    <!-- <span href='#' class='property-favorite'><span class='icon-heart-o'></span></a> -->
                                    <h2 class='property-title'><a onclick='detailItem(` +
                        item.id +
                        `)'>` +
                        item.name +
                        `</a></h2>
                                    <span class='property-location d-block mb-3'><span class='property-icon icon'>üìç S·ªë l∆∞·ª£ng</span> ` +
                        item.quantity +
                        ` <span class='property-icon icon'> &nbsp; &nbsp; &nbsp; üïí Ng√†y h·∫øt h·∫°n</span> <span class='publishedTime'> ` +
                        item.closeTime +
                        `   </span></span>
            <div class='col'>
                                    <strong class='property-price text-primary text-success column-price'>M·ª©c l∆∞∆°ng:` +
                        numberWithCommas(item.salary) +
                        ` </strong> 
                                    <strong class='property-price text-primary text-success'> vnƒë</strong>
                                    </div>
                                    <p>
                                        ` +
                        item.description +
                        `
                                    </p>
                                    <ul class='property-specs-wrap mb-3 mb-lg-0'>
                                        <li>
                                            <span class='property-specs'>jobCategoryID</span>
                                            <span class='property-specs-number'>` +
                          getItemByIDAndSource(item.jobCategoryID,jobCategoryData).name +
                        `</span>

                                        </li> 
                                        <li>
                                            <span class='property-specs'>typeID</span>
                                            <span class='property-specs-number'>` +
                        item.jobTypeID +
                        `</span>
                                        </li>
                                        </ul>
                                </div>

                            </div>
                    </div>
                    </td>
                </tr>
                `;
                    //   $(newRow).appendTo($("#novaticItemContainer"));
                    $(newRow).appendTo($("#tableData tbody"));
                });

                initTable();
            },
            error: function(e) {
                //console.log(e.message);
                // initTable();
                Swal.fire({
                    title: "Error!",
                    text: "Hi·ªán ch∆∞a c√≥ th√¥ng tin",
                    type: "error",
                    confirmButtonText: "OK"
                });
            }
        });
    }
    //ko c·∫ßn s·ª≠a c√°i n√†y
    function initTable() {
        table = $("#tableData").DataTable({
            aLengthMenu: [
                [10, 25, 50, 100, 200, -1],
                [10, 25, 50, 100, 200, "T·∫•t c·∫£"]
            ],
            ordering: false
        });

        // formatNumber();
    }

    // c√°i n√†y v√≠ d·ª• s·ª≠a th√†nh load danh m·ª•c job n√†y: bi·∫øt n√≥ l√† c√°i th·∫ª select r·ªìi ƒë√∫ng k ?ok
    function loadDataSelectCompanyCategory() {
        $.ajax({
            url: "http://localhost/zitgaNovatic/api/jobCategory/readQuery.php",
            type: "POST",
            async: "true",
            data: {
                condition: " 1=1  "
            },
            success: function(responseData) {
                console.log(
                    new Date().getSeconds() +
                    ":" +
                    new Date().getMilliseconds() +
                    " - loaded jobCategory"
                );
                // debugger;
                var data = responseData.data;
                //ƒë√¢y t·ª©c l√† khi ajax tr·∫£ v·ªÅ data th√¨ ta g√°n n√≥ v√†o c√°i m·∫£ng kia, ok ?ok, r·ªìi gi·ªù t∆∞∆°ng t·ª±, job l·∫•y dc obj theo id th√¨ jobCategory c≈©ng l√†m dc, ƒë√∫ng k ?ok
                jobCategoryData = data;
                data.forEach(function(item, index) {
                    //hi·ªÉu c√°i option value l√† id ko ? v√¨ n√≥ l√† kh√≥a ngo√†i √Ω ?ok
                    var newRow =
                        `
                        <option value='` +
                        item.id +
                        `'>` +
                        item.name +
                        `</option>
                        `;
                    $(newRow).appendTo($("#jobCategoryID"));
                    $(newRow).appendTo($("#buyCompanyCategoryID"));
                });
            },
            error: function(e) {
                //console.log(e.message);
            }
        });
    }
    //ho√†n to√†n t∆∞∆°ng t·ª±
    function loadDataSelectProvince() {
        $.ajax({
            url: "https://masterlaw.vn/manager/api/province/readQuery.php",
            type: "POST",
            async: "true",
            data: {
                condition: " 1=1 "
            },
            success: function(responseData) {
                console.log(
                    new Date().getSeconds() +
                    ":" +
                    new Date().getMilliseconds() +
                    " - loaded jobCategory"
                );
                // debugger;
                var data = responseData.data;
                // jobCategoryData = data;
                data.forEach(function(item, index) {
                    var newRow =
                        `
                        <option value='` +
                        item.name +
                        `'>` +
                        item.name +
                        `</option>
                        `;
                    $(newRow).appendTo($("#provinceID"));
                    $(newRow).appendTo($("#buyProvinceID"));
                });
            },
            error: function(e) {
                //console.log(e.message);
            }
        });
    }

    //ƒë√¢y l√† h√†m show item detail, ta c≈©ng d·ªÖ d√†ng l·∫•y dc obj currentObj , ƒë·ªÉ show c√°c thu·ªôc t√≠nh c·ªßa n√≥ nh∆∞ currentObj.name l√™n form detaol
    //ok ?ok
    function detailItem(id) {
        // alert(id);
        var currentObj = getItemByID(id);//l·∫•y ra object t·ª´ dataSource, nh·ªõ dataSource l√† g√¨ k ?ok
        console.log(currentObj);

        $("#detailName").text(currentObj.name);
        $("#detailPrice").text(numberWithCommas(currentObj.salary)); // hi·ªÉu ch·ª© ?ok 
        $("#detailDescription").text(currentObj.description);
        $("#detailDetailInfo").html(currentObj.detailInfo);
        $("#detailPublishedYear").text(currentObj.publishedYear);
        $("#detailCompanyCategory").text(getItemByIDAndSource(currentObj.jobCategoryID,jobCategoryData).name);// ƒë√¢y show detail n√†y dang l√† id n√†y
        $("#detailPublishedTime").text(currentObj.publishedTime);
        $("#detailProvince").text(currentObj.provinceID);

        $("#modal-id").modal("show");
    }
    //l·∫•y object t·ª´ dataSource
    function getItemByID(id) {
        //h√†m n√†y ch·ªâ d√πng dc cho th·∫±ng job, v√¨ dataSource l√† ƒë·ªï t·ª´ job v√†o ok ?ok
        const result = dataSource.find(item => parseInt(item.id) === id);
        return result;
    }

    //c√≥ hi·ªÉu l√† t√¥i vi·∫øt theo d·∫°ng, c·∫£ c√°i m·∫£ng source c≈©ng l√† tham s·ªë truy·ªÅn v√†o, ƒë·ªÉ d√πng dc cho t·∫•t c·∫£ c√°c th·ª© jobType jobStatus jobRank ... ko ?
    function getItemByIDAndSource(id,dataSourceArray) {
        // th·∫±ng n√†y thi c√°i source l√† ƒë·ªông ! m√†y l·∫•y source n√†o c≈©ng dc, ok ?ok, th·∫ø t√¥i mu·ªën l·∫•y obj c·ªßa job b·∫±ng h√†m n√†y c≈©ng ƒë∆∞·ª£c ƒë√∫ng k !ok
        // truy·ªÅn param l√† m·∫£ng job l√† xong hehe r·ªìi show c√°i name ra cho m√°u
        const result = dataSourceArray.find(item => parseInt(item.id) === parseInt(id));
        // c√≥ bi·∫øt t√¥i ƒëang n√≥i v·ªÅ c√°i g√¨ k ?
        // c√≥ bi·∫øt ƒë√¢y l√† h√†m ƒë·ªÉ l√†m g√¨ k ?l·∫•y data thn\ong qua id
       // l·∫•y 1 object theo ID v√† c√°i dataSource, ok ?ok c√≥ object r·ªìi th√¨ ta c√≥ th·ªÉ l·∫•y object.name object.salary ... ok ?ok
       // th√¥i ch·∫Øc n√≥i nhi·ªÅu th·ª© qu√° ae c≈©ng k nh·ªìi v√†o dc. b·ªè qua ƒëi 
        return result;
    }

    //format ti·ªÅn
    function numberWithCommas(x) {
        if (isNaN(x)) return x;
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    //b·∫≠t form inssert, ch∆∞a c·∫ßn
    function editItem(id) {
        updatingItemID = id;
        $("#saleRequest").modal('show');

    }

    //insert d·ªØ li·ªáu ch∆∞a c·∫ßn
    function updateItem(id) {
        var updatingObj = {
            "id": "1",
            "active": "1",
            "name": $("#buyName").val(),
            "email": $("#buyEmail").val(),
            "phone": $("#buyPhone").val(),
            "companyCode": $("#buyCompanyCode").val(),
            "description": $("#buyDescription").val(),
            "createdTime": "2019-09-23 22:36:43",
            "price": $("#buyPrice").val(),
            "jobCategoryID": $("#buyCompanyCategoryID").val(),
            "provinceID": $("#buyProvinceID").val()
        };

        // correcting data
        //updatingObj.provinceID = updatingObj.provinceID.join(", ");

        // updatingObj.jobCategoryID = updatingObj.jobCategoryID.join(", ");
        // updatingObj.provinceID = updatingObj.provinceID.join(", ");

        Swal.fire({
            title: 'X√°c nh·∫≠n?',
            text: "G·ª≠i th√¥ng tin",
            type: 'info',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#443',
            confirmButtonText: 'T√¥i x√°c nh·∫≠n'
        }).then((result) => {
            if (result.value) {
                $("#modal-id").modal('hide');


                //CALL AJAX TO CREATE
                if (id == 0) {
                    updatingObj.id = 1;
                    updatingObj.active = 1;
                    console.log(updatingObj);
                    $.ajax({
                        url: "https://masterlaw.vn/manager/api/sellRequest/create.php",
                        type: "POST",
                        contentType: "application/json",
                        data: JSON.stringify(updatingObj),
                        success: function(responseData) {
                            // debugger;
                            if (responseData.status === 201 && responseData.message === "CREATED") {
                                Swal.fire(
                                    'ƒê√£ g·ª≠i y√™u c·∫ßu!',
                                    'Xin c·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i y√™u c·∫ßu, ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi trong th·ªùi gian s·ªõm nh·∫•t!',
                                    'success'
                                );
                                updatingObj = responseData.data;
                                createNotification(updatingObj);
                                $('#saleRequest').modal('hide');
                            }
                        },
                        error: function(e) {
                            //console.log(e.message);
                            Swal.fire(
                                'L·ªói!',
                                'ƒê√£ s·∫£y ra l·ªói, xin vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n.',
                                'error'
                            );
                        }
                    });
                }
            }
        })
    }

    //insert notification, ch∆∞a c·∫ßn
    function createNotification(obj){
        var updatingObj = {
            id: 1,
            active: 1,
            createdTime: "2019-09-23 22:44:03",
            description: "B·∫°n v·ª´a nh·∫≠n ƒë∆∞·ª£c y√™u c·∫ßu mua doanh nghi·ªáp m·ªõi t·ª´ "+obj.name,
            id: 1,
            messageCheckingStatusID: 10001,
            name: "Y√™u c·∫ßu mua doanh nghi·ªáp m·ªõi",
        }; 
        console.log(updatingObj);
        $.ajax({
            url: "https://masterlaw.vn/manager/api/notification/create.php",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(updatingObj),
            success: function (responseData) {
                // debugger;
                console.log("novatic technology solutions");
            },
            error: function (e) {
                console.log(e.message);
            }
        });
    }
</script>

<!-- r·ªìi v·∫≠y c√¥ng vi·ªác l√†, s·ª≠a l·∫°i c√°i file nayfu ƒë·ªÉ n√≥ load dc c√°c th√¥ng tin c·ªßa job ra, ph√≠a c√°i b·∫£ng ch·ªâ show  v√†i ba th√¥ng tin
ch√≠nh nh∆∞ t√™n, m√¥ t·∫£, l∆∞∆°ng, ng√†y m·ªü ng√†y ƒë√≥ng, ng√†nh ngh·ªÅ desinger/programmer, type fulltime/part time, c√≤n trong detail th√¨ SHOW T·∫§T C·∫¢ RA
ph√≠a backend th√™m demo v√†i c√°i th√¨ ph·∫£i t·∫°o c√°i n√†o t·ª≠ t·∫ø v√†o nh√©, ƒë·∫ßy ƒë·ªß d·ªØ li·ªáu, ok ?ok

n·∫Øm dc c√¥ng vi·ªác gi·ªù l√†m g√¨ ch∆∞a>?ok, r·ªìi gi·ªù c√≥ 1 thao t√°c l√†
v√≠ d·ª• jobCategoryID th√¨ l√† 10001, l·∫•y ra ntn dc c√°i text ? nh√¨n nh√©: hi·ªÉu k ?ko d√πng c√°i frrontend h√¥m qua b·ªçn t t√¨m ak
c√≥, nh∆∞ng ƒë√¢y l√† b·∫£o 2 ae c√πng th·ª±c h√†nh, ƒë√¢y l√† th·ª±c h√†nh, hi·ªÉu k ?ok 
n√†o ƒë·∫∑t c√¢u h·ªèi ƒëi ae, c√≥ v·∫•n ƒë√® g√¨ ch∆∞a r√µ n√†o, m·∫°nh d·∫°n n√™n n√†o sao nh√°t th·∫ø :))) ko th√¨ b·∫£o l√°t t ngihx ra  t√¥i h·ªèi, ok >?oke

-->